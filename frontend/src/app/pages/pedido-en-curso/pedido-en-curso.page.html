<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/table-selection" text="Mesas"></ion-back-button>
    </ion-buttons>
    <ion-title>Mesa {{ mesaId }} - Pedido en Curso</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <ion-list>
    <ion-list-header color="light">
      <ion-label>Estado de los √çtems</ion-label>
    </ion-list-header>
    
    <ion-item *ngFor="let item of itemsActuales">
      <ion-label>
        <h2>{{ item.nombre }} (x{{ item.cantidad }})</h2>
        <p>Subtotal: ${{ item.subtotal }}</p>
      </ion-label>
      <ion-badge slot="end" [color]="getColorEstado(item.estado)">
        <span *ngIf="item.estado === 'servido'">‚úÖ Servido</span>
        <span *ngIf="item.estado === 'en_preparacion'">‚è≥ En Prep.</span>
        <span *ngIf="item.estado === 'pendiente'">üï∞Ô∏è Pendiente</span>
      </ion-badge>
    </ion-item>
  </ion-list>

  <ion-card class="ion-margin-top">
    <ion-card-header>
      <ion-card-title class="ion-text-center" color="primary">
        Total: ${{ totalPedido }}
      </ion-card-title>
    </ion-card-header>
    
    <ion-card-content class="ion-padding-vertical">
      
      <ion-button expand="block" fill="outline" color="primary" (click)="agregarMasItems()">
        <ion-icon slot="start" name="add-circle-outline"></ion-icon>
        A√±adir M√°s al Pedido
      </ion-button>
      
      <ion-button expand="block" color="success" class="ion-margin-top" (click)="solicitarFactura()">
        <ion-icon slot="start" name="cash-outline"></ion-icon>
        Solicitar Factura y Cerrar
      </ion-button>
      
    </ion-card-content>
  </ion-card>

</ion-content>